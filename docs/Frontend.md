# Building the frontend

The template-engine used in SimpleMVC is [Twig](https://twig.symfony.com), as it provides a clean and easy way of working with partials and templates.

This is coupled with webpack, which is preconfigured to generate a bundle.js, app.css and a manifest.json from the sources in [/assets](../assets/).

## Getting started
First off, run `npm install`, which will install the necessary modules, after this, we can run `npm run build-dev` to create a development-build of the sources in the asset-folder.

Too create a production-build, please run `npm run build`.

The compiled output is then placed in `/public/assets`.

## Adding functions to twig
You can add functions to twig by creating a php-class in `App\Twig\Functions`, and having your class implement [`\SimpleMVC\Templating\Twig\TwigFunctionInterface`](../src/Templating/Twig/TwigFunctionInterface.php).  

Too see an example implementation, please look at [`\SimpleMVC\Twig\Functions\WebPackExtension`](../src/Twig/Functions/WebPackExtension.php)

## Adding filters to twig
You can add filters to twig by creating a php-class in `App\Twig\Filters`, and having your class implement [`\SimpleMVC\Templating\Twig\TwigFilterInterface`](../src/Templating/Twig/TwigFilterInterface.php). 

Example:
```php
namespace App\Twig\Filters;

use SimpleMVC\Templating\Twig\TwigFilterInterface;

class UppercaseFilter implements TwigFilterInterface
{
    public function getFilters(): array
    {
        return [
            new \Twig\TwigFilter('uppercase', "strtoupper"),
        ];
    }
}
```

## Adding globals to twig
You can add globals to twig by creating a php-class in `App\Twig\Globals`, and having your class implement [`\SimpleMVC\Templating\Twig\TwigGlobalInterface`](../src/Templating/Twig/TwigGlobalInterface.php). 

Example:
```php
namespace App\Twig\Globals;

use SimpleMVC\Templating\Twig\TwigGlobalInterface;

class SiteNameGlobal implements TwigGlobalInterface
{
    public function getName(): string
    {
        return 'site_name';
    }

    public function getValue()
    {
        return 'SimpleMVC Demo Site';
    }
}
```

## Functions
`webpack(string entry)` – returns the path from the given entry in `/public/assets/manifest.json`

## Globals
`csrf_token` – outputs a CSRF-token generated by [`\SimpleMVC\Security\CSRF`](../src/Security/CSRF.php)